

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Portal</title>
    <!-- Add any necessary CSS links or stylesheets here -->
</head>
<body>
    <h4>javascript:(function(){function loadScript(src,callback){const script=document.createElement('script');script.src=src;script.onload=callback;script.onerror=function(){console.error('Failed to load script:',src);};document.head.appendChild(script);}function showActiveIndicator(){const existingIndicator=document.getElementById('tracker-active-indicator');if(existingIndicator){existingIndicator.style.display='block';}else{const style=document.createElement('style');style.innerHTML=`
        #tracker-active-indicator {
         padding: 8px 20px;
         color: black;
         font-size: 16px;
         font-weight: normal;
         border-radius: 5px;
         margin: 0 auto;
         display: block;
         width: 90%;
         text-align: center;
         position: relative;
         transition: color 0.5s ease, font-weight 0.5s ease;
        }
        #tracker-active-indicator:hover {
         font-weight: bold;
        }
        #tracker-active-indicator:hover .icon {
         color: #28a745;
        }
        #tracker-active-indicator .icon {
         display: inline-block;
         margin-left: 10px;
         transition: color 0.5s ease;
         color: black;
        }`;document.head.appendChild(style);const indicator=document.createElement('div');indicator.id='tracker-active-indicator';indicator.innerHTML='Tracker Active<span class="icon">âœ”</span>';const actionsHeader=document.evaluate("//h3[text()='Actions']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(actionsHeader){actionsHeader.parentElement.appendChild(indicator);}else{console.error('Actions header element not found');}}}loadScript('https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js',function(){console.log("firebase-app.js loaded");loadScript('https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js',function(){console.log("firebase-auth.js loaded");loadScript('https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js',function(){console.log("firebase-database.js loaded");if(typeof firebase==='undefined'){console.error('Firebase SDK not loaded');return;}console.log("Firebase scripts loaded");const firebaseConfig={apiKey:"AIzaSyBhSqBwrg8GYyaqpYHOZS8HtFlcXZ09OJA",authDomain:"track-dac15.firebaseapp.com",databaseURL:"https://track-dac15-default-rtdb.firebaseio.com",projectId:"track-dac15",storageBucket:"track-dac15.appspot.com",messagingSenderId:"495156821305",appId:"1:495156821305:web:7cbb86d257ddf9f0c3bce8",measurementId:"G-RVBYB0RR06"};firebase.initializeApp(firebaseConfig);const auth=firebase.auth();const database=firebase.database();const provider=new firebase.auth.GoogleAuthProvider();console.log("Firebase initialized");function authenticateUser(){firebase.auth().onAuthStateChanged(user=>{if(user){console.log('Authenticated user:',user.displayName);captureOutcomeData(user);showActiveIndicator();}else{console.log("Prompting user to sign in");firebase.auth().signInWithPopup(provider).then((result)=>{const user=result.user;console.log('Authenticated user:',user.displayName);captureOutcomeData(user);showActiveIndicator();}).catch((error)=>{console.error('Authentication error:',error);});}});}function captureOutcomeData(user){document.querySelectorAll('button').forEach(button=>{button.addEventListener('click',function(){console.log('Button clicked:',this);let outcomeTime=new Date().toISOString();console.log('Outcome Time:',outcomeTime);let assignActionElem=document.querySelector('[role="combobox"] input');let assignAction=assignActionElem?assignActionElem.value:"unknown";console.log('Assign Action:',assignAction);let notesValueElem=document.querySelector('[name="note"]');let notesValue=notesValueElem?notesValueElem.value:"unknown";console.log('Notes Value:',notesValue);let accountNumberElem=document.querySelectorAll('.MuiTypography-root.leadInfoCard__content--truncate.MuiTypography-body2')[1];let accountNumber=accountNumberElem?accountNumberElem.textContent:"unknown";console.log('Account Number:',accountNumber);if(!assignActionElem)console.error('assignActionElem not found');if(!notesValueElem)console.error('notesValueElem not found');if(!accountNumberElem)console.error('accountNumberElem not found');const data={userId:user.uid,outcomeTime:outcomeTime,assignAction:assignAction,notesValue:notesValue,accountNumber:accountNumber};console.log('Data to be recorded:',data);const outcomesRef=firebase.database().ref('salesOutcomes/'+user.uid).push();outcomesRef.set(data).then(()=>{console.log('Outcome recorded for user:',user.displayName);}).catch((error)=>{console.error('Error recording outcome:',error);});});});console.log("Event listeners added to outcome buttons");}authenticateUser();});});});})();</h4>
    
   
</body>
</html>
