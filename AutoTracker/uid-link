document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM fully loaded and parsed');

    firebase.auth().onAuthStateChanged(user => {
        if (user) {
            console.log('User authenticated:', user.uid);
            loadUserData(user.uid);
        } else {
            console.error('No user is signed in.');
        }
    });

    const uidInput = document.getElementById('uidInput');
    const loadButton = document.getElementById('loadButton');

    if (loadButton && uidInput) {
        loadButton.addEventListener('click', () => {
            const inputUid = uidInput.value.trim();
            if (inputUid) {
                console.log('Loading data for UID:', inputUid);
                loadUserData(inputUid);
            } else {
                console.warn('Please enter a valid UID.');
                alert('Please enter a valid UID.');
            }
        });
    } else {
        console.error('Load button or UID input not found in the DOM.');
    }
});

function loadUserData(uid) {
    const salesRef = firebase.database().ref('sales/' + uid);
    const salesCountsRef = firebase.database().ref('salesCounts/' + uid);
    const salesOutcomesRef = firebase.database().ref('salesOutcomes/' + uid);
    const salesTimeFramesRef = firebase.database().ref('salesTimeFrames/' + uid);

    salesRef.on('value', snapshot => {
        const salesData = snapshot.val();
        console.log('Real-time sales data:', salesData);
        // Implement logic to update UI with sales data
    });

    salesCountsRef.on('value', snapshot => {
        const salesCounts = snapshot.val();
        console.log('Real-time sales counts data:', salesCounts);
        // Implement logic to update UI with sales counts data
    });

    salesOutcomesRef.on('value', snapshot => {
        const salesOutcomes = snapshot.val();
        console.log('Real-time sales outcomes data:', salesOutcomes);
        // Implement logic to update UI with sales outcomes data
    });

    salesTimeFramesRef.on('value', snapshot => {
        const salesTimeFrames = snapshot.val();
        console.log('Real-time sales time frames data:', salesTimeFrames);
        // Implement logic to update UI with sales time frames data
    });
}