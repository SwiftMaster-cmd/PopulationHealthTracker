import { auth } from './firebase-config.js';
import { updatePassword } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-auth.js";

async function setPassword(newPassword) {
    try {
        const user = auth.currentUser;
        if (user) {
            await updatePassword(user, newPassword);
            alert('Password updated successfully. You can now log in using your email and password.');
        } else {
            alert('No user is currently signed in.');
        }
    } catch (error) {
        console.error('Error setting password:', error);
        if (error.code === 'auth/requires-recent-login') {
            alert('Please re-authenticate and try again.');
        }
    }
}

window.addEventListener('DOMContentLoaded', () => {
    document.getElementById('setPasswordButton').addEventListener('click', () => {
        const newPassword = document.getElementById('setPassword').value;
        setPassword(newPassword);
    });
});